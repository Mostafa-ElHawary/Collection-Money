@model CollectionApp.Application.ViewModels.CustomerCreateVM

@{
    ViewData["Title"] = Localizer["CreateCustomer"];
}

@section Styles {
    <link href="~/css/Customer/Create.css" rel="stylesheet" />
}

<div class="dashboard-content">
    <!-- Enhanced dashboard header -->
    <div class="dashboard-header">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="dashboard-title">@Localizer["CreateCustomer"]</h1>
                <p class="dashboard-subtitle">@Localizer["AddNewCustomer"]</p>
            </div>
            <a asp-action="Index" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                @Localizer["BackToList"]
            </a>
        </div>
    </div>

    <div class="row g-4">
        <!-- Main form section -->
        <div class="col-lg-8">
            <div class="form-card">
                <form asp-action="Create" method="post" class="customer-form">
                    <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

                    <!-- Personal Information Section -->
                    <div class="form-section">
                        <div class="section-header">
                            <h4 class="section-title">
                                <i class="fas fa-user"></i>
                                @Localizer["PersonalInformation"]
                            </h4>
                            <div class="section-divider"></div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label asp-for="FirstName" class="form-label">@Localizer["FirstName"]</label>
                                    <input asp-for="FirstName" class="form-control" placeholder="@Localizer["EnterFirstName"]" />
                                    <span asp-validation-for="FirstName" class="validation-error"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label asp-for="LastName" class="form-label">@Localizer["LastName"]</label>
                                    <input asp-for="LastName" class="form-control" placeholder="@Localizer["EnterLastName"]" />
                                    <span asp-validation-for="LastName" class="validation-error"></span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label asp-for="NationalId" class="form-label">@Localizer["NationalID"]</label>
                            <input asp-for="NationalId" class="form-control" placeholder="@Localizer["EnterNationalID"]" />
                            <span asp-validation-for="NationalId" class="validation-error"></span>
                        </div>
                    </div>

                    <!-- Contact Information Section -->
                    <div class="form-section">
                        <div class="section-header">
                            <h4 class="section-title">
                                <i class="fas fa-envelope"></i>
                                @Localizer["ContactInformation"]
                            </h4>
                            <div class="section-divider"></div>
                        </div>

                        <div class="form-group">
                            <label asp-for="Email" class="form-label">@Localizer["EmailAddress"]</label>
                            <input asp-for="Email" class="form-control" placeholder="@Localizer["EnterEmailAddress"]" />
                            <span asp-validation-for="Email" class="validation-error"></span>
                        </div>

                        <div class="phone-section">
                            <h5 class="subsection-title">
                                <i class="fas fa-phone"></i>
                                @Localizer["PhoneInformation"]
                            </h5>
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label asp-for="PhoneCountryCode" class="form-label">Country Code</label>
                                        <input asp-for="PhoneCountryCode" class="form-control" placeholder="e.g. +1" />
                                        <span asp-validation-for="PhoneCountryCode" class="validation-error"></span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label asp-for="PhoneAreaCode" class="form-label">Area Code</label>
                                        <input asp-for="PhoneAreaCode" class="form-control" placeholder="e.g. 555" />
                                        <span asp-validation-for="PhoneAreaCode" class="validation-error"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label asp-for="PhoneNumber" class="form-label">Phone Number</label>
                                        <input asp-for="PhoneNumber" class="form-control" placeholder="e.g. 1234567" />
                                        <span asp-validation-for="PhoneNumber" class="validation-error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label asp-for="PhoneType" class="form-label">Phone Type</label>
                                <select asp-for="PhoneType" class="form-control">
                                    <option value="">Select phone type</option>
                                    <option value="Mobile">Mobile</option>
                                    <option value="Home">Home</option>
                                    <option value="Work">Work</option>
                                    <option value="Other">Other</option>
                                </select>
                                <span asp-validation-for="PhoneType" class="validation-error"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Address Information Section -->
                    <div class="form-section">
                        <div class="section-header">
                            <h4 class="section-title">
                                <i class="fas fa-map-marker-alt"></i>
                                Address Information
                            </h4>
                            <div class="section-divider"></div>
                        </div>

                        <div class="form-group">
                            <label asp-for="AddressLine1" class="form-label">Address Line 1</label>
                            <input asp-for="AddressLine1" class="form-control" placeholder="Enter street address" />
                            <span asp-validation-for="AddressLine1" class="validation-error"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="AddressLine2" class="form-label">Address Line 2</label>
                            <input asp-for="AddressLine2" class="form-control" placeholder="Apartment, suite, etc. (optional)" />
                            <span asp-validation-for="AddressLine2" class="validation-error"></span>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label asp-for="City" class="form-label">City</label>
                                    <input asp-for="City" class="form-control" placeholder="Enter city" />
                                    <span asp-validation-for="City" class="validation-error"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label asp-for="State" class="form-label">State/Province</label>
                                    <input asp-for="State" class="form-control" placeholder="Enter state" />
                                    <span asp-validation-for="State" class="validation-error"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label asp-for="PostalCode" class="form-label">Postal Code</label>
                                    <input asp-for="PostalCode" class="form-control" placeholder="Enter postal code" />
                                    <span asp-validation-for="PostalCode" class="validation-error"></span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label asp-for="Country" class="form-label">Country</label>
                            <input asp-for="Country" class="form-control" placeholder="Enter country" />
                            <span asp-validation-for="Country" class="validation-error"></span>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Create Customer
                        </button>
                        <a asp-action="Index" class="btn btn-secondary">
                            <i class="fas fa-times"></i>
                            Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Sidebar with guidelines -->
        <div class="col-lg-4">
            <div class="guidelines-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="fas fa-info-circle"></i>
                        Creation Guidelines
                    </h5>
                </div>
                <div class="card-body">
                    <p class="guidelines-intro">Please ensure all required fields are completed accurately:</p>
                    <ul class="guidelines-list">
                        <li><i class="fas fa-check-circle"></i>First and last name are required</li>
                        <li><i class="fas fa-check-circle"></i>National ID must be in the correct format</li>
                        <li><i class="fas fa-check-circle"></i>Email address must be valid</li>
                        <li><i class="fas fa-check-circle"></i>Phone number should include country code</li>
                        <li><i class="fas fa-check-circle"></i>Address information helps with customer communication</li>
                    </ul>
                </div>
            </div>

            <!-- Progress indicator -->
            <div class="progress-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="fas fa-tasks"></i>
                        Form Progress
                    </h5>
                </div>
                <div class="card-body">
                    <div class="progress-item">
                        <span class="progress-label">Personal Info</span>
                        <div class="progress-bar">
                            <div class="progress-fill" data-section="personal"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <span class="progress-label">Contact Info</span>
                        <div class="progress-bar">
                            <div class="progress-fill" data-section="contact"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <span class="progress-label">Address Info</span>
                        <div class="progress-bar">
                            <div class="progress-fill" data-section="address"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        // Form progress tracking
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('.customer-form');
            const progressBars = document.querySelectorAll('.progress-fill');

            function updateProgress() {
                // Personal info progress
                const personalFields = form.querySelectorAll('[name="FirstName"], [name="LastName"], [name="NationalId"]');
                const personalFilled = Array.from(personalFields).filter(field => field.value.trim() !== '').length;
                const personalProgress = (personalFilled / personalFields.length) * 100;
                document.querySelector('[data-section="personal"]').style.width = personalProgress + '%';

                // Contact info progress
                const contactFields = form.querySelectorAll('[name="Email"], [name="PhoneNumber"], [name="PhoneType"]');
                const contactFilled = Array.from(contactFields).filter(field => field.value.trim() !== '').length;
                const contactProgress = (contactFilled / contactFields.length) * 100;
                document.querySelector('[data-section="contact"]').style.width = contactProgress + '%';

                // Address info progress
                const addressFields = form.querySelectorAll('[name="AddressLine1"], [name="City"], [name="State"], [name="Country"]');
                const addressFilled = Array.from(addressFields).filter(field => field.value.trim() !== '').length;
                const addressProgress = (addressFilled / addressFields.length) * 100;
                document.querySelector('[data-section="address"]').style.width = addressProgress + '%';
            }

            // Update progress on input
            form.addEventListener('input', updateProgress);
            updateProgress(); // Initial update
        });
    </script>
}
